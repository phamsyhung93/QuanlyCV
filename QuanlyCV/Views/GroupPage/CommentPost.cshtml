<!DOCTYPE html>
<html>
<head>
    <title>Đăng nhập website quản lý công việc</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="~/Content/css/bootstrap.css">
    <link href="~/Content/css/style.css" rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="~/Content/css/font.css" type="text/css" />
    <link href="~/Content/css/font-awesome.css" rel="stylesheet">
</head>
<body class="signup-body">
    @foreach (var lstComment in ViewBag.listCommentPost)
    {
        if (lstComment.ParentId == 0)
        {
            <div class="comment-item comment-post">

                <div class="comment-avatar">
                    <img src="~/Content/images/avatar/@lstComment.EmployeeAvatar" class="img-responsive" alt="avatar">
                </div>
                <div class="comment-content">

                    <div class="">
                        <a href="" class="a-hover-underline coment-content-fullname">@lstComment.EmployeeFullname</a>
                        <span class="coment-content-text">@lstComment.CommentContent</span>
                    </div>
                    <div class="comment-content-action">
                        <a class="a-hover-pointer a-hover-underline">Thích</a>
                        <a class="a-hover-pointer a-hover-underline">Bình luận</a>
                    </div>
                </div>
            </div>

            var count = 0;
            foreach (var lstComment1 in ViewBag.listCommentPost)
            {
                if (lstComment1.ParentId == lstComment.CommentId)
                {
                    <ul class="comment-level-2">
                        <li>
                            <div class="comment-item lst-SubComment-Post-@lstComment.PostId">

                                <div class="comment-avatar">
                                    <img src="~/Content/images/avatar/@lstComment1.EmployeeAvatar" class="img-responsive" alt="avatar">
                                </div>
                                <div class="subcomment-content-post">
                                    <div>
                                        <a href="" class="a-hover-underline coment-content-fullname">@lstComment1.EmployeeFullname</a>
                                        <span class="coment-content-text">@lstComment1.CommentContent</span>
                                    </div>
                                    <div class="comment-content-action">
                                        <a class="a-hover-pointer a-hover-underline">Thích</a>
                                        <a class="a-hover-pointer a-hover-underline">Bình luận</a>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                }
                count++;
                if (count == ViewBag.listCommentPost.Count)
                {
                    break;
                }
            }
            <div class="wrapper-input-comment" style="margin-left: 60px;">
                <img src="~/Content/images/avatar/@ViewBag.Employee.EmployeeAvatar" class="img-responsive" alt="">
                <div class="input-comment">
                    <textarea name="" rows="1" onkeyup="textAreaAdjust(this)" class="Content-SubComment-Post-@lstComment.CommentId" style="overflow:hidden"></textarea>
                    <ul class="input-comment-level-2-icon">
                        <li><a class="a-hover-pointer"><i class="fa fa-smile-o"></i></a></li>
                        <li><a class="a-hover-pointer"><i class="fa fa-picture-o"></i></a></li>
                        <li><a class="a-hover-pointer" data-id="@lstComment.PostId" data-content="@lstComment.CommentId" onclick="submitSubCommentPost(this)"><i class="fa fa-paper-plane-o"></i></a></li>
                    </ul>
                </div>
            </div>
        }
    }
    <script>

        function submitSubCommentPost(e) {
            var PostId = $(e).data("id");
            var CommentId = $(e).data("content");
            var content = $(".Content-SubComment-Post-" + CommentId).val();
            $.ajax({
                type: "POST",
                url: "@Url.Action("SubCommentPost", "GroupPage")",
                data: { id: PostId, content: content, CommentId: CommentId },
            success: function (rps) {
                $(".lst-Comment-Post-" + PostId).html(rps);
            }
        });
        $(".Content-SubComment-Post-" + CommentId).val("");
        }
    </script>
</body>
</html>